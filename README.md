# Piano Simulation（钢琴声学仿真系统）

Piano Simulation 是一个基于 **Rust** 实现的钢琴声学仿真与声音合成项目，面向钢琴物理建模与计算声学方向的学习与实验研究。

本项目关注在**物理真实性、实时性与工程可实现性**之间取得平衡，尝试通过物理建模与采样技术相结合的方式，构建具有良好听感与动态响应的虚拟钢琴系统。

---

## 项目简介

传统的钢琴声音合成方法主要分为采样合成与纯物理建模两类：

- 采样合成音色真实，但缺乏动态交互性；
- 纯物理建模理论完备，但计算开销大，且高频瞬态细节有限。

本项目采用**混合建模思路**：

- 在物理层，使用有限差分时域法（FDTD）对包含刚度项与频率相关阻尼项的刚性弦振动方程进行数值求解，以复现钢琴弦的非谐性泛音结构与击弦动态；
- 在工程层，引入高保真采样数据，用于补偿物理模型在高频瞬态与质感细节上的不足。
  
https://github.com/jsjs66-hub/Piano-Simulation/blob/main/%E6%BC%94%E7%A4%BA/1%E6%9C%884%E6%97%A5.mp4
---

## 主要特性

- 刚性弦钢琴物理建模（含非谐性与耗散机制）
- 基于 FDTD 的时间域数值仿真
- 支持多音符（Polyphonic）并行计算
- MIDI 文件解析与自动演奏
- 计算机键盘实时弹奏
- 使用 Rust 实现，注重性能与数值稳定性

---

## 技术实现简述

- **物理模型**：基于包含张力、刚度与频率相关阻尼项的耗散刚性弦模型  
- **数值方法**：显式有限差分时域法（FDTD），满足 CFL 稳定性条件  
- **并行计算**：使用 `rayon` 实现多琴键并行更新  
- **音频系统**：基于 `rodio` 进行实时音频流输出  
- **MIDI 支持**：使用 `midly` 解析并播放 MIDI 文件  

---

## 编译与运行

请确保已安装 Rust 工具链：

```bash
rustc --version
cargo --version
